%
% Elecnor Deimos
%
% Data Exchange Component
%
% Borja Lopez Fernandez (BOLF)
%
% DEC Troubleshooting
%

\documentclass[dec_sum_main.tex]{subfiles}
 
\begin{document}

% ------------------------------------------------------------------------------
% Information Log Messages

\section{Information Messages}

\subsection{Scope}
The information messages by DEC SW are meant in general for tracing the nominal performed circulations allowing consumers to monitor them.

\subsection{Index of Messages}

\begin{itemize}
    \item \textbf{[DEC\_000]} : DEC Database / Inventory \$table created
    \item \textbf{[DEC\_001]} : Interface added to DEC Inventory
	\item \textbf{[DEC\_002]} : Valid schema check for configuration file
	\item \textbf{[DEC\_003]} I/F "interface": Interface is correctly declared in the DEC Inventory
	\item \textbf{[DEC\_004]} I/F "interface": Exchange point is reachable
	\item \textbf{[DEC\_005]} I/F "interface": Polling Started
	\item \textbf{[DEC\_050]} I/F "interface": Polling Completed / No file(s) available for pull	
	\item \textbf{[DEC\_060]} I/F "interface": Polling Completed / New file(s) available for pull
	\item \textbf{[DEC\_100]} I/F "interface": Pull iteration completed for such interface
	\item \textbf{[DEC\_105]} I/F "interface": "filename" is available
	\item \textbf{[DEC\_110]} I/F "interface": Downloaded "filename" with size "num\_bytes" bytes
    \item \textbf{[DEC\_111]} I/F "interface": Downloaded "filename" with same md5 / duplication
	\item \textbf{[DEC\_115]} Disseminated "filename" into "directory" Intray
	\item \textbf{[DEC\_116]} Compressed "filename" in "method" at "directory" Intray
	\item \textbf{[DEC\_120]} I/F "interface": Deleting unknown file "filename" available
	\item \textbf{[DEC\_125]} I/F "interface": Deleting duplicated file "filename" previously received 
	\item \textbf{[DEC\_126]} I/F "interface": Deleted downloaded file "filename"
	\item \textbf{[DEC\_130]} I/F "interface": event "name" triggered  	
	\item \textbf{[DEC\_131]} I/F "interface": event NewFile2Intray triggered
	\item \textbf{[DEC\_135]} I/F "interface": "filename" pull report created
	\item \textbf{[DEC\_210]} I/F "interface": File "filename" sent using "protocol"
	\item \textbf{[DEC\_211]} File retrieved from SourceDir to the GlobalOutbox (prior its \textit{push} circulation) 
	\item \textbf{[DEC\_212]} TBW
	\item \textbf{[DEC\_213]} TBW
	\item \textbf{[DEC\_214]} TBW
    \item \textbf{[DEC\_254]} Request of OData metadata to interface
    \item \textbf{[DEC\_255]} Retry Request of OData URL		
    \item \textbf{[DEC\_257]} Metadata OData file created	
    \item \textbf{[DEC\_259]} Download request to an OData interface delivery point
    \item \textbf{[DEC\_260]} Successful download from an OData interface delivery point
    \item \textbf{[NATS001]} I/F "interface": NATS Request performed
	\item \textbf{[NATS002]} I/F "interface": NATS Request is successful	
\end{itemize}

\label{DEC000}
\subsection{[DEC\_000] DEC Database / Inventory \$table created}
This message is generated by \hyperref[decManageDB]{\textit{decManageDB}} when creating the DEC Inventory database and the associated tables which are necessary to be able to persist the records of the performed circulations.
\begin{verbatim}
	[DEC_000] DEC Database / Inventory table interfaces created
	[DEC_000] DEC Database / Inventory table tracked_files created
	[DEC_000] DEC Database / Inventory table received_files created
	[DEC_000] DEC Database / Inventory table sent_files created
\end{verbatim}

\label{DEC001}
\subsection{[DEC\_001] Interface added into DEC Inventory}
This message is generated by \hyperref[decConfigInterface2DB]{\textit{decConfigInterface2DB}} when adding a new interface into the DEC Inventory database to be able to persist the records of the performed circulations.

\label{DEC002}
\subsection{[DEC\_002] Node XML configuration is valid}
This message is generated by \hyperref[decValidateConfig]{\textit{decValidateConfig}} tool when checking the DEC configuration XML syntax and semantics across the different configuration files ; one message is generated for each configuration file.
\begin{verbatim}
	[DEC_002] Valid schema check for dec_config
	[DEC_002] Valid schema check for dec_interfaces
	[DEC_002] Valid schema check for dec_incoming_files
	[DEC_002] Valid schema check for dec_outgoing_files
	[DEC_002] Valid schema check for ft_mail_config
	[DEC_002] Valid schema check for dec_log_config
\end{verbatim}

\label{DEC003}
\subsection{[DEC\_003] Interface Correctly Declared in the Inventory}
This message is generated by \hyperref[decCheckConfig]{\textit{decCheckConfig}} tool when checking the availability of the configured interfaces \hyperref[decCheckConfig]{\textit{decCheckConfig}} tool when checking the availability of the configured interfaces.

\label{DEC004}
\subsection{[DEC\_004] Interface Exchange Point Reachable}
This message is generated by \hyperref[decCheckConfig]{\textit{decCheckConfig}} tool when checking the availability of the configured interfaces.

\label{DEC005}
\subsection{[DEC\_005] Interface Polling Start}
This message time tags the start of the polling operation to \textit{pull} files from a given interface. The time to poll and filter the file to be pulled depends on the number of files published, the different rules configured for download or / and verification with the database of previous downloads ; measurements can be done with this message and its conclusion which is flagged by \hyperref[DEC050]{\textit{[DEC\_050]}} or \hyperref[DEC060]{\textit{[DEC\_060]}} message.

\label{DEC050}
\subsection{[DEC\_050] Interface Polling Complete / No File(s) Available}
This message is logged upon completion filtering the files published in the download interface and verification of eventual duplications in the database without any \textit{new} file meeting the download rules. It can be used to measure the time required to perform the filtering operations.

\label{DEC060}
\subsection{[DEC\_060] Interface Polling Complete / New File(s) Available}
This message is logged upon completion filtering the files published in the download interface and verification of eventual duplications in the database reporting there are some \textit{new} files for download. It can be used to measure the time required to perform the filtering operations.

\label{DEC100}
\subsection{[DEC\_100] Interface Pull Iteration Completed}
This message is logged upon the completion of the pull circulation loop.

\label{DEC105}
\subsection{[DEC\_105] File Available}
The file referenced in the message met any of the filtering rules defined in the configuration \textit{dec\_incoming\_files.xml} and it is therefore available for download from the interface. This message is logged only when the \textit{--list} mode is used, otherwise the files matching the rules are directly downloaded and logged accordingly. 

\label{DEC110}
\subsection{[DEC\_110] File Downloaded}
The file referenced in the message has been downloaded from the interface and placed into the \hyperref[LocalInbox]{\textit{LocalInbox}} associated to such interface. If the same file is available again at the same interface, the DEC will detect a file duplication condition.

\label{DEC111}
\subsection{[DEC\_111] File Downloaded with same MD5}
The downloaded file from the interface referenced in the message has the same md5 with respect to the previous retrieval and it is handled as a file duplication condition.

\label{DEC115}
\subsection{[DEC\_115] File Disseminated}
The file referenced in the message met any of the and it has been moved from \hyperref[LocalInbox]{\textit{LocalInbox}} into the Intray(s) matching the first \hyperref[Dissemination rules]{\textit{dissemination rule}}.

\label{DEC116}
\subsection{[DEC\_116] File Compressed}
The file referenced in the message has been compressed according to the \hyperref[Dissemination rules]{\textit{dissemination rule}} \textit{Compress} optional configuration item of the \textit{Intray} entity.

\label{DEC117}
\subsection{[DEC\_117] File Uncompressed}
The file referenced in the message has been compressed according to the \hyperref[Dissemination rules]{\textit{dissemination rule}} \textit{Compress} optional configuration item of the \textit{Intray} entity.

\subsection{[DEC\_120] Unknown File Deleted}
According to the configuration item \hyperref[DeleteUnknownFiles]{\textit{DeleteUnknownFiles}} defined in \textit{dec\_config.xml} configuration, a file available in the \textit{pull} interface, which did not match any filtering rule defined in the configuration \textit{dec\_incoming\_files.xml} has been deleted from the \textit{DownloadDirs} \textit{Directory} of such interface it was present.

\label{DEC125}
\subsection{[DEC\_125] Duplicated File Deleted}
According to the configuration item \hyperref[DeleteDuplicatedFiles]{\textit{DeleteDuplicatedFiles}} defined in \textit{dec\_config.xml} configuration, a file available in the \textit{pull} interface, which has been previously downloaded successfully such interface is considered duplicated and it is removed directly in download directory without downloading it.

\label{DEC126}
\subsection{[DEC\_126] File Deleted}
According to the configuration item \hyperref[DeleteFlag]{\textit{DeleteDownloaded}} defined in \textit{dec\_incoming\_files.xml} for every interface, the file which has been successfully \textit{pulled} is deleted subsequently.
This message can also be logged when deleting duplicated files.

\subsection{[DEC\_130] Event Triggered}
The message traces some event which has been triggered for a given interface according to the configuration items defined in \hyperref[Events]{Events}.

\subsubsection{Event newfile2intray}
This event is triggered upon successful polling completion (cf. \hyperref[DEC060]{DEC\_060}) which drove dissemination of some files (cf. \hyperref[DEC115]{DEC\_115}).
\begin{verbatim}
[DEC_130] LEAP I/F : event newfile2intray => auxConverter -f /S3/Leap_Second.dat
\end{verbatim}

\subsubsection{Event onreceivenewfilesok}
This event is triggered upon successful polling completion (cf. \hyperref[DEC060]{DEC\_060}) which drove download of some files (cf. \hyperref[DEC110]{DEC\_110}).
\begin{verbatim}
[DEC_130] LEAP I/F : event onreceivenewfilesok triggered => echo %f RECEIVED
\end{verbatim}

\subsection{[DEC\_131] Dissemination Command Execution }
The message traces some event which has been triggered for a given interface according to the configuration item \textit{"Execution"} defined in the \hyperref[Dissemination rules]{\textit{dissemination rules}}.

\label{DEC135}
\subsection{[DEC\_135] Report Generation of Files Pulled}
The message traces the generation of the DEC report containing the files retrieved during a pull iteration from a given interface.

\label{DEC144}
\subsection{[DEC\_144] Pull Statistics}
This message is generated by \hyperref[decStats]{decStats} to supply some statistics regarding the file \textit{pull} operations during the last "n" hours.\newline
The internal of log messages is a JSON string referring to:
\begin{itemize}
	\item \textbf{filename} : the name of the file pushed
	\item \textbf{size} : size of the file in Bytes
	\item \textbf{protocol} : protocol the file was pushed
	\item \textbf{date} : date of the circulation
\end{itemize}

\label{DEC200}
\subsection{[DEC\_200] Push iteration to Interface completed successfully}
This message traces the successful push circulation completion.

\label{DEC203}
\subsection{[DEC\_203] Request to Push File to Interface started}
This message traces the start of a given file push circulation towards an interface.

\label{DEC205}
\subsection{[DEC\_205] Push Retry to Interface waiting LoopDelay}
Push loop which has failed any circulation (cf. \hyperref[DEC710]{DEC\_710} ) is waiting \textit{LoopDelay} seconds to retry.

\label{DEC206}
\subsection{[DEC\_206] Push Immediate Retry to Re-sending File to Interface waiting LoopDelay}
Push loop which has failed any circulation (cf. \hyperref[DEC710]{DEC\_710} ) is waiting \textit{LoopDelay} seconds to retry.


\label{DEC210}
\subsection{[DEC\_210] File Pushed to Interface}
The file referenced in the message has been uploaded to the interface placed into its \hyperref[Upload Rules]{\textit{UploadDir}}.

\label{DEC211}
\subsection{[DEC\_211] Push Setup / File at GlobalOutbox}
File has been placed in the GlobalOutbox for push circulations.

\label{DEC212}
\subsection{[DEC\_212] Push Setup / File at Removed from SourceDir}
TBW.

\label{DEC213}
\subsection{[DEC\_213] Push Setup / File at Interface LocalOutbox}
TBW.

\label{DEC214}
\subsection{[DEC\_214] Push Setup / File Compressed at Interface LocalOutbox}
TBW.

\label{DEC235}
\subsection{[DEC\_235] Report Generation DeliveredFiles to Interface}
TBW.

\label{DEC240}
\subsection{[DEC\_240] Push Email Notification to Interface}
TBW / decNotify2Interface.

\label{DEC241}
\subsection{[DEC\_241] Push Error Email Notification to Interface}
TBW / decNotify2Interface.

\label{DEC244}
\subsection{[DEC\_244] Push Statistics}
This message is generated by \hyperref[decStats]{decStats} to supply some statistics regarding the file \textit{push} operations during the last "n" hours.\newline
The internal of the log message is a JSON string referring to:
\begin{itemize}
	\item \textbf{filename} : the name of the file pushed
	\item \textbf{size} : size of the file in Bytes
	\item \textbf{protocol} : protocol the file was pushed
	\item \textbf{date} : date of the circulation
\end{itemize}
\begin{verbnobox}[\fontsize{8pt}{8pt}\selectfont]
{"filename":"tai-utc.dat","size":61,"interface":"LOCAL","protocol":"FTP;","date":"2020-04-15 17:03:19 UTC"}
{"filename":"mario.jpg","size":32478,"interface":"LOCAL","protocol":"FTP;","date":"2020-04-15 17:03:19 UTC"}
\end{verbnobox}

\label{DEC254}
\subsection{[DEC\_254] Request OData Metadata to Interface}
Request of OData Metadata to an interface.

\label{DEC255}
\subsection{[DEC\_255] Retry Request OData URL}
Retry to request OData URL.

\label{DEC257}
\subsection{[DEC\_257] OData Metadata File  Created}
Query reply from an OData service dumped to file.

\label{DEC259}
\subsection{[DEC\_259] OData Download Request}
Request to download using HTTP a product from an OData service.

\label{DEC260}
\subsection{[DEC\_260] OData Download Successful}
Product download successful from an OData service.

\label{NATS001}
\subsection{[NATS001] NATS Request Perfomed}
This message contains trace information regarding the NATS request performed to an interface: server, subject and body.

\label{NATS002}
\subsection{[NATS002] NATS Request Successful}
This message contains trace information regarding the NATS request reply.

\label{NATS003}
\subsection{[NATS003] NATS Subscribe Performed}
This message contains trace information regarding the NATS subscribe message.
% ------------------------------------------------------------------------------
% Warning Messages

\newpage

\section{Warning Messages}

\subsection{Scope}
The warning messages by DEC SW are meant in general for tracing not nominal situations which might eventually require some intervention.

\subsection{Index of Messages}

\begin{itemize}
	\item \textbf{[DEC\_301]} Detected duplicated file "filename" already received from "interface" I/F
	\item \textbf{[DEC\_320]} Detected unknown file "filename" available at "interface" I/F
	\item \textbf{[DEC\_330]} "filename" is stuck in "temporal" directory
	\item \textbf{[DEC\_331]} "filename" is stuck in LocalInbox directory
	\item \textbf{[DEC\_401]} "filename" was previously sent
	\item \textbf{[DEC\_555]} "filename" was previously Sent
\end{itemize}

\label{DEC301}
\subsection{[DEC\_301] Duplicated File Available}
The file reported is available again at the \textit{pull} interface ; if the inventory is active, DEC retrieves just once a given file from each interface. This message will be reported during every polling iteration unless the \textit{duplicated} file is removed from the interface.

\label{DEC320}
\subsection{[DEC\_320] Unknown File Available}
The file reported is available in the \textit{pull} interface, but did not match any filtering rule defined in the configuration \textit{dec\_incoming\_files.xml}. This message will be repeated every polling iteration unless the \textit{unknown} file is removed from the interface.

\label{DEC330}
\subsection{[DEC\_330] File Stuck in Temporal Directory}
This warning is associated to error message \hyperref[DEC620]{\textit{[DEC\_620]}} informing that the file was successfully downloaded and stuck in the temporal directory available for contingency recovery.

\label{DEC340}
\subsection{[DEC\_340] Email notification is disabled for the Interface}
This warning is obtained when triggering \hyperref[decNotify2Interface]{\textit{decNotify2Interface}} for an interface whose configuration has such notifications disabled (cf. flag \hyperref[SendNotification]{\textit{SendNotification}}).

\label{DEC401}
\subsection{[DEC\_401] File Previously Uploaded}
The file reported has been found available again for upload towards an interface though it has been previously \textit{pushed} there ; since the \textit{push} iteration is executed with the "once" flag, this file has been discarded for upload.

\label{DEC501}
\subsection{[DEC\_501] Interface already present in DEC Inventory}
This warning message is generated by \hyperref[decConfigInterface2DB]{\textit{decConfigInterface2DB}} when requesting addition of an interface which is already present in the DEC Inventory database.

\label{DEC555}
\subsection{[DEC\_555] File Disseminated Exists}
This message is raised when a previous file with same filename is found disseminating locally into an in-tray.

\label{DEC556}
\subsection{[DEC\_556] Old File Removed}
This message is raised upon detection of a previous file in the final intray to record its deletion prior the dissemination of the new one.

% ------------------------------------------------------------------------------
% Error Messages

\newpage
\section{Error Messages}

\subsection{Scope}
The error messages by DEC SW are meant in general for tracing problems encountered during one iteration which prevented the complete termination of any circulation rule.

\subsection{Index of Messages}

\begin{itemize}
	\item \textbf{[DEC\_600]} I/F "interface": Could not perform polling
	\item \textbf{[DEC\_604]} I/F "interface": Exchange Point Not Reachable
	\item \textbf{[DEC\_605]} I/F "interface": Pull Miss-Configuration
	\item \textbf{[DEC\_610]} I/F "interface": Unable to connect to \hyperref[Config_Server]{"Hostname"}
	\item \textbf{[DEC\_611]} I/F "interface": reason of the connection failure
	\item \textbf{[DEC\_612]} I/F "interface": Cannot reach directory defined in any of the the \hyperref[DownloadDirs]{"DownloadDirs"}
	\item \textbf{[DEC\_613]} I/F "interface": server message associated to the failure associated to the change of directory
	\item \textbf{[DEC\_614]} I/F "interface": Cannot GET "URL"
	\item \textbf{[DEC\_615]} I/F "interface": Failed to get list of files / FTP passive mode is "mode"
	\item \textbf{[DEC\_620]} I/F "interface": Could not copy "file" into local
"directory"
	\item \textbf{[DEC\_625]} Dissemination failure of "file" into intray
"directory" using mv command
	\item \textbf{[DEC\_626]} Dissemination failure of "file" into intray
"directory" using hard-links command
	\item \textbf{[DEC\_627]} Compression / Uncompression failure of "file" into intray
"directory" using hard-links command
	\item \textbf{[DEC\_628]} Failure when executing command
	\item \textbf{[DEC\_666]} I/F "interface": Could not download "file"
	\item \textbf{[DEC\_667]} OData I/F "interface": Could not download "file"
	\item \textbf{[DEC\_705]} I/F "interface": Push miss-configuration
	\item \textbf{[DEC\_711]} Could not reach directory from \textit{SourceDir} to fetch files for push
	\item \textbf{[DEC\_713]} Could not place file in  \textit{LocalOutbox} to prepare files out-tray for push
	\item \textbf{[DEC\_798]} Configuration problem	
	\item \textbf{[DEC\_799]} Integration problem
\end{itemize}

\label{DEC600}
\subsection{[DEC\_600] Failed to Pull from Interface}
This message is raised at the completion of the interface polling operation (i.e. \textit{pull} circulation)when it failed. Reason should have been previously logged (e.g. \hyperref[DEC610]{DEC\_610}, \hyperref[DEC611]{DEC\_611},etc). Polling elapse time can be computed by referring to the associated \hyperref[DEC005]{DEC\_005} message. 

\label{DEC601}
\subsection{[DEC\_601] Failed to Start Listener for Interface}
This message is raised when the interface commanded for \textit{pull} circulation is miss-configured. It is usually explained by \hyperref[DEC605]{DEC\_605} message. 

\label{DEC603}
\subsection{[DEC\_603] Listener for Interface was not running}
This message is raised when the interface commanded to stop or re-start its listener was not previously switched-on.

\label{DEC604}
\subsection{[DEC\_604] Interface Exchange Point Not Reachable}
This message is generated by \hyperref[decCheckConfig]{\textit{decCheckConfig}} tool when checking the availability of the configured interfaces. This message is the counter side of \hyperref[DEC004]{DEC\_004} tracing that the check tool could not reach the exchange point, which may be related to miss-configuration or network unavailability.

\label{DEC605}
\subsection{[DEC\_605] Pull Miss-Configuration}
This message is raised when interface commanded for \textit{pull} circulation is miss-configured.

\subsubsection{Not existing interface in dec\_interfaces.xml }
\begin{verbatim}
[DEC_605] I/F Foo: such is not a configured interface
\end{verbatim}

\subsubsection{Inventory db is not configured / reachable }
\begin{verbatim}
[DEC_605] I/F Foo: db inventory is not configured / reachable
\end{verbatim}

\subsubsection{Not registered interface in database }
Polling is performed using the database but such interface has not been registered.
\begin{verbatim}
[DEC_605] I/F Foo: such is not a registered I/F in db
\end{verbatim}

\subsubsection{Pull flag is disabled in  dec\_interfaces.xml }
\begin{verbatim}
[DEC_605] I/F IERS: Enabled4Receiving flag is disabled
\end{verbatim}

\subsubsection{I/F LocalInbox not defined in  dec\_incoming\_files.xml }
\begin{verbatim}
[DEC_605] I/F Foo: LocalInbox configuration item not found
\end{verbatim}

\label{DEC610}
\subsection{[DEC\_610] Unable to Connect to server}
This error is raised when it is not possible to connect to \hyperref[Config_Server]{"Hostname"} using the \hyperref[Config_Server]{"Protocol"}.

\subsection{[DEC\_611] Pull Server Error Message}
\label{DEC611}
This error code can bring different messages associated to the connection failure [DEC\_610] is reporting. Errors can driven by miss-configuration of the \hyperref[Config_Server]{Server} associated to such interface or its unavailability due to network problems.

\subsubsection{Hostname is unknown}
\begin{verbatim}
[DEC_611] I/F LOCALHOST_NOT_SECURE: getaddrinfo: nodename nor servname provided, or not known
\end{verbatim}

\subsubsection{Service not enabled by host}
\begin{verbatim}
[DEC_611] I/F LOCALHOST_NOT_SECURE: Connection refused - connect(2) for 127.0.0.1:21
\end{verbatim}

\subsubsection{SSL/TLS not configured by server}
\begin{verbatim}
[DEC_611] I/F LOCALHOST_FTPS: 500 This security scheme is not implemented
\end{verbatim}

\subsubsection{Failed authentication}
The authentication failure message differs depending on the network protocol used for pull.
\begin{verbatim}
[DEC_611] I/F LOCALHOST_NOT_SECURE: 530 Login authentication failed
\end{verbatim}

\subsection{[DEC\_612] Cannot Reach Interface Download Directory}
\label{DEC612}
Failed to reach one of the \textit{Directory} of the \hyperref[DownloadDirs]{"DownloadDirs"} of a given interface.

\subsection{[DEC\_613] Server Error Message }
The information replied by the server when error condition \hyperref[DEC612]{[DEC\_612]} arises is usually meaningless to understand the root reason to limit the risks of security attacks. It usually is related to file permissions on the server or miss-configuration problems referring to a non existing directory.
\begin{verbatim}
[DEC_613] LOCALHOST I/F: 550 Can't change directory to /a/if/local/: No such file or directory
\end{verbatim}

\label{DEC614}
\subsection{[DEC\_614] Cannot Get URL}
Failed to get the URL associated to one \textit{Directory} of the \hyperref[DownloadDirs]{"DownloadDirs"} of a given interface when using the HTTP protocol.

\label{DEC615}
\subsection{[DEC\_615] Failed to list files with FTP}
In practical terms, this is a failure when performing the FTP command list to obtain the list of files available in a given directory.

\subsection{[DEC\_620] Downloaded File not Copied into Final Dir}
\label{DEC620}
The file retrieved from the interface could not be copied into the final directory defined in the configuration. This is usually a problem of file permissions. 

\subsection{[DEC\_625] File Move Dissemination Failure}
\label{DEC625}
This error is raised when DEC could not disseminate a file into a given \textit{Intray} according to the \hyperref[Dissemination rules]{\textit{Dissemination rules}} using a mv command. This is usually associated to file permission problems of the \textit{Intray} directory.

\subsection{[DEC\_626] File Hard-Link Dissemination Failure}
\label{DEC626}
This error is raised when DEC could not disseminate a file into a given \textit{Intray} according to the \hyperref[Dissemination rules]{\textit{Dissemination rules}} using hard-links. This is usually associated to file permission problems of the \textit{Intray} directory.

\subsection{[DEC\_627] File Dissemination Compress / Uncompress Failure}
\label{DEC627}
This error is raised when DEC could not compress / uncompress a file into a given \textit{Intray} according to the \hyperref[Dissemination rules]{\textit{Dissemination rules}}.

\subsection{[DEC\_628] Command Execution Failure}
\label{DEC628}
This error is raised when DEC tried to execute a command in sub-shell obtaining failure status.

\subsection{[DEC\_666] Download Failure}
\label{DEC666}
This error is raised when DEC could not download a file from a given interface.

\subsection{[DEC\_667] OData URI Download Failure}
\label{DEC667}
This error is raised when DEC could not download a URI file from some given OData interface delivery point.

\subsection{[DEC\_668] OData Metadata Download Failure}
\label{DEC668}
This error is raised when DEC could not download the OData metadata from some given OData interface delivery point.

\label{DEC670}
\subsection{[DEC\_670] Deletion Failure}
This error is raised when DEC could not delete from the interface a file which has been successfully downloaded (cf. \hyperref[DEC110]{\textit{[DEC\_110]}}).
For a given file from a specific interface this message is exclusive to \hyperref[DEC126]{\textit{[DEC\_126]}}.

\label{DEC700}
\subsection{[DEC\_700] Push Failure to Interface}
This message is raised at the completion of the interface \textit{push} operation, when it failed, upon completion of the retry loops (cf. \hyperref[TXRXParams]{TXRXParams configuration}). Reason should have been previously logged (e.g. \hyperref[DEC710]{DEC\_710}, \hyperref[DEC711]{DEC\_711},\hyperref[DEC712]{DEC\_712}). 

\label{DEC703}
\subsection{[DEC\_703]  Push Iteration to Interface is already running}
This message is raised upon execution of a new instance of decSend2Interface for a given interface when there is already a previous on-going execution for such given interface.

\label{DEC705}
\subsection{[DEC\_705] Push Miss-Configuration for Interface}
This message is raised when interface commanded for \textit{push} circulation is miss-configured.

\subsubsection{Not existing interface in dec\_interfaces.xml }
\begin{verbatim}
[DEC_705] Foo I/F: such is not a configured interface
\end{verbatim}

\subsubsection{Push flag is disabled in dec\_interfaces.xml }
\begin{verbatim}
[DEC_705] IERS I/F: Enabled4Sending flag is disabled
\end{verbatim}

\label{DEC710}
\subsection{[DEC\_710] Failed to send file to Interface}
This message is raised when failure to \textit{push} a file towards an interface.

\label{DEC711}
\subsection{[DEC\_711] Cannot Reach SourceDir Sub-Directory}
This error is raised when DEC could not reach a \textit{SourceDir} sub-directory to fetch the selected files to \textit{push} according to some \hyperref[Upload Rules]{\textit{[Upload Rule}} miss-configuration.

\label{DEC712}
\subsection{[DEC\_712] Cannot Reach Interface Upload Directory}
Failed to reach \textit{UploadDir} for a given interface.

\label{DEC713}
\subsection{[DEC\_713] File Hard-link Failure into LocalOutbox}
This error is raised when hard-linking from the source directory to the local outbox.

\label{DEC714}
\subsection{[DEC\_714] File Read Error in LocalOutbox}
This error is raised when a file previously detected in the LocalOutbox for push is not found when reading it to extract its size. This is usually an integration problem of the data-flow and the component workflow.

\label{DEC715}
\subsection{[DEC\_715] Push Server Error Message}
Server error message associated to the \textit{push} failure. 

\subsubsection{No Write Permission }
\begin{verbatim}
[DEC_715] I/F LOCALHOST_FTPS: 553 Could not create file
\end{verbatim}

\label{DEC740}
\subsection{[DEC\_740] Failed to Email Push Success Notification to Interface}
This message is raised when \hyperref[decNotify2Interface]{\textit{[decNotify2Interface}} failed to email the notification to inform about a \textit{success} \textit{push} iteration.

\label{DEC741}
\subsection{[DEC\_741] Failed to Email Push Error Notification to Interface}
This message is raised when \hyperref[decNotify2Interface]{\textit{[decNotify2Interface}} failed to email the notification to inform about a \textit{failed} \textit{push} iteration.

\label{DEC742}
\subsection{[DEC\_742] Email Server Error}
This message is the (SMTP) server error when sending notification emails.

\subsubsection{Credentials Not Accepted}

\begin{verbatim}
[ERROR] 2020-04-14 18:44:38 NODE_1.mail - [DEC_742] LOCALHOST_NOT_SECURE I/F: Username and Password not accepted
\end{verbatim}

\subsubsection{SMTP Server Not Known}

\begin{verbatim}
[ERROR] 2020-04-14 18:49:42 NODE_1.mail - [DEC_742] LOCALHOST_NOT_SECURE I/F: getaddrinfo: nodename nor servname provided, or not known
\end{verbatim}

\subsubsection{Time-Out / Port Miss-configuration}
\begin{verbatim}
[ERROR] 2020-04-14 18:56:31 NODE_1.mail - [DEC_742] LOCALHOST_NOT_SECURE I/F: execution expired
\end{verbatim}

\subsubsection{Need TLS / Secure Flag Miss-configuration}
\begin{verbatim}
[ERROR] 2020-04-14 18:58:58 NODE_1.mail - [DEC_742] LOCALHOST_NOT_SECURE I/F: Must issue a STARTTLS command first
\end{verbatim}

\label{DEC750}
\subsection{[DEC\_750] Event Error}
This message is logged when the command executed associated to some \hyperref[Events]{\textit{Event}} raised.
\begin{verbatim}
	[ERROR] [DEC_750] I/F NOAA: EventManager failed execution of auxConverter / No such file or directory - auxConverter
\end{verbatim}


\label{DEC798}
\subsection{[DEC\_798] Configuration Error}
This message is logged when the XML schema validation corresponding to a given configuration file is failing. 
\begin{verbatim}
	[DEBUG] NODE_1.checker - xmllint --schema /Users/mario/.frum/versions/3.1.0/lib/ruby/gems/3.1.0/gems/dec-1.0.33/code/dec/../../schemas/dec_log_config.xsd /Users/mario/.frum/versions/3.1.0/lib/ruby/gems/3.1.0/gems/dec-1.0.33/code/dec/../../config/dec_log_config.xml --noout
	[DEC_798] Fail schema check for dec_interfaces
\end{verbatim}


\label{DEC799}
\subsection{[DEC\_799] Integration Error}
This message is logged when some unexpected error raised. 

\subsubsection{Missing SW Dependency}
Some SW dependency required by DEC was not found in \$PATH. Refer to \hyperref[FOSS]{\textit{section FOSS}} to check the SW dependencies which DEC needs for its correct execution.
\begin{verbatim}
	[DEC_799] Fatal Error : 7za not present in $PATH
	[DEC_799] Fatal Error : jq not present in $PATH
	[DEC_799] Fatal Error : xmllint not present in $PATH
	[DEC_799] Fatal Error : sqlite3 not present in $PATH
	[DEC_799] Fatal Error : curl not present in $PATH
	[DEC_799] Fatal Error : ncftpget not present in $PATH
	[DEC_799] Fatal Error : ncftpput not present in $PATH
	[DEC_799] Fatal Error : sftp not present in $PATH
\end{verbatim}

\subsubsection{Database table not existing or reachable}
This is an error when not finding the some DEC/Inventory table ; likely because it has not been created yet.
\begin{verbatim}
	[DEC_799] Fatal Error : DEC/Inventory Could not find table 'interfaces'
\end{verbatim}

\subsubsection{Zero length file download}
If an interfaces publishes a Zero length file, this can be retrieved though no data content is really dumped into the file-system (e.g. FTP protocol replies successful 226). This is an anomaly of the source interface.

\subsubsection{Compress method for push not supported}
This is a configuration error regarding the definition of the compression mechanism prior push operations.
\begin{verbatim}
[DEC_799] Fatal Error : compress method #{compress} not supported / check dec_outgoing_files.xml
\end{verbatim}

\subsubsection{Unexpected error when launching the listener for pull}
This is an unexpected error when launching the listener for pull operations.
\begin{verbatim}
[DEC_799] I/F #{entity}: Error when launching Listener
\end{verbatim}

\subsubsection{File or Directory  not existing or reachable}
This is an error when trying to reach one file or directory.
\begin{verbatim}
	[DEC_799] I/F #{entity}: No such file or directory @ dir_s_chdir - /volume1/dec/interfaces/dhus_odata/
\end{verbatim}


% ------------------------------------------------------------------------------
% Debug Messages

\newpage
\section{Debug Messages}

\subsection{Scope}
The debug messages by DEC SW are meant in general for troubleshooting purposes when undesired behaviour raises ; for instance it may be useful to activate it when rehearsing new configurations. \newline

\par
\noindent
By default the log debug messages are not generated ; they can be optionally activated at the execution time of the different DEC commands by usage of the \textit{--Debug} or \textit{-D} execution flag supplied at the command line interface.


\subsection{Index of Messages}

\begin{itemize}
	\item \textbf{[DEC\_910]} I/F "interface": Filtering directory with files "number" of items
	\item \textbf{[DEC\_911]} I/F "interface": performance when filtering according to download rules 
	\item \textbf{[DEC\_912]} I/F "interface": performance when filtering according to database
	\item \textbf{[DEC\_913]} I/F "interface": filtering file with database
	\item \textbf{[DEC\_914]} I/F "interface": "file" found in database
	\item \textbf{[DEC\_915]} I/F "interface": "file" not found in database	
	\item \textbf{[DEC\_941]} File dissemination command I
	\item \textbf{[DEC\_942]} File dissemination command II	
	\item \textbf{[DEC\_951]} Removing "file" in "directory" which is \hyperref[LocalInbox]{"LocalInbox"}
\end{itemize}

\subsection{[DEC\_910] Filtering Number of Files in Download Directory}
\label{DEC910}
This message reports the number of files published in the \hyperref[DownloadDirs]{"DownloadDirs"} which are about to be filtered according to the download rules and the database content.

\subsection{[DEC\_911] Filtering According to Download Rules}
\label{DEC911}
This message reports the CPU time resources used to perform the filtering operations.

\label{DEC912}
\subsection{[DEC\_912] Filtering Number of Items with Database}
This message traces the number of files which met the download rules during a given pull iteration and which are about to be filtered with respect to the database registry.

\label{DEC913}
\subsection{[DEC\_913] Filtering File with Database}
This message traces that a file found in the interface, which is matching the download rules, is about to be verified whether it has been previously received or not by checking its name reference in the database. 

\label{DEC914}
\subsection{[DEC\_914] File Found in Database}
This message traces that a file found in the interface, which is matching the download rules, is already registered in the database referring to a previous successful download, and therefore such file will be filtered-out and it will not be pulled again.

\label{DEC915}
\subsection{[DEC\_915] File Previously Not Recorded in Database}
This message traces that a file found in the interface, which is matching the download rules, is not previously registered in the database, and therefore such file will be requested for download as part of the \textit{pull} iteration.

\subsection{[DEC\_941] File Dissemination Command I}
\label{DEC941}
This message traces the file-system command used to perform the pulled file \textit{first} dissemination from the Interface \hyperref[LocalInbox]{\textit{"LocalInbox"}} into the first \textit{Intray} configured according to the \hyperref[Dissemination rules]{\textit{Dissemination Rules}}.

\subsection{[DEC\_942] File Dissemination Command II}
\label{DEC942}
This message traces the file-system command used to perform the pulled file \textit{remaining} dissemination(s) from the first \textit{Intray} configured according to the \hyperref[Dissemination rules]{\textit{Dissemination Rules}}.

\subsection{[DEC\_951] Removal from LocalInbox upon Dissemination}
\label{DEC951}
This message reports that the "file" has been removed from the "directory" \hyperref[LocalInbox]{"LocalInbox"} upon a complete dissemination according to the configured rules.

\end{document}

